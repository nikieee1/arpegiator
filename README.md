# arpegiator
Ключевые моменты
Исследования показывают, что лучше иметь 12 цифр на входе для баланса между разнообразием и управляемостью, но 24 цифры подходят для более сложных композиций.  
Кажется вероятным, что последовательность можно расширить с помощью метода, похожего на Фибоначчи, если начальное количество цифр меньше 12.  
Первая цифра определяет набор инструментов (0–8), вторая — тональность (мажор или минор), а остальная часть используется для выбора аккордов и эффектов.
Объяснение выбора количества цифр
Исследования показывают, что 12 цифр обеспечивают достаточную вариативность для создания музыки, сохраняя при этом простоту управления. Это позволяет использовать первую цифру для выбора набора инструментов, вторую — для определения мажорной или минорной тональности, а оставшиеся цифры — для построения аккордовой последовательности.  
Если вам нужно больше разнообразия, 24 цифры могут быть полезны для более длинных или сложных композиций. Учитывая, что последовательности Фибоначчи повторяются каждые 24 числа по модулю 24, 24 цифры могут быть особенно подходящими для создания гармоничных паттернов. Однако для большинства случаев 12 цифр достаточно, особенно если вы планируете расширить короткую последовательность (например, с 3 до 12 цифр) с помощью метода, похожего на Фибоначчи.  
Расширение последовательности
Если на входе у вас, например, 3 цифры, вы можете расширить их до 12, используя метод, похожий на Фибоначчи: каждая новая цифра вычисляется как сумма двух предыдущих по модулю 10. Например, для последовательности 1, 2, 3:  
Следующая цифра: 2 + 3 = 5  
Затем: 3 + 5 = 8, и так далее, пока не получите 12 цифр. Это делает музыку более разнообразной, как вы упомянули.
Пример использования
Допустим, у вас есть последовательность 1, 2, 3, расширенная до 1, 2, 3, 5, 8, 3, 1, 4, 5, 9, 4, 3:  
Первая цифра (1) выбирает набор инструментов (например, набор 1 из 9 предопределённых).  
Вторая цифра (2) определяет тональность: 2 % 2 = 0, значит мажор.  
Сумма цифр с 3 по 12 (3+5+8+3+1+4+5+9+4+3=45) по модулю 12 даёт 9, что соответствует ключу Bb мажор.  
Остальные цифры (3, 5, 8, 3, 1, 4, 5, 9, 4, 3) используются для выбора аккордов: цифры 0–5 соответствуют диатоническим аккордам (например, 0 — тоника, 1 — доминанта), а 6–9 могут добавлять специальные эффекты, такие как диссонанс или паузы.
Этот подход делает музыку динамичной и интересной, особенно с использованием арпеджиатора для создания мелодий на основе аккордов.  
Отчёт: Подробное исследование метода генерации музыки на основе числовых последовательностей
В данном отчёте мы подробно рассмотрим, как использовать числовые последовательности длиной 12 или 24 цифр для генерации музыки, учитывая связь с последовательностями Фибоначчи и требования пользователя. Мы также предложим методологию для выбора количества цифр, расширения коротких последовательностей и маппинга цифр на музыкальные элементы, такие как наборы инструментов, тональность и аккордовые прогрессии.  
Введение
Пользователь указал, что на входе может быть 12 или 24 цифр, и выразил желание варьировать это количество, связывая процесс с последовательностями Фибоначчи. Указано, что Фибоначчи повторяется каждые 24 числа, что делает использование более 24 цифр избыточным. Также упоминается возможность расширения коротких последовательностей (например, из 3 цифр до 12) для увеличения разнообразия музыки.  
Цель — определить оптимальное количество цифр и предложить алгоритм, который использует эти цифры для выбора инструментов, тональности и аккордов, с учётом музыкальной теории, включая круг квинт и диатонические аккорды.  
Оптимальное количество цифр
Исследования показывают, что 12 цифр обеспечивают баланс между разнообразием и управляемостью. Это позволяет:  
Использовать первую цифру для выбора одного из 9 наборов инструментов.  
Вторую цифру — для определения мажорной или минорной тональности.  
Остальные цифры — для построения аккордовой последовательности, что достаточно для создания короткой музыкальной композиции.
Если требуется больше вариативности, 24 цифры могут быть использованы для более длинных или сложных произведений. Учитывая, что последовательности Фибоначчи по модулю 24 имеют период 24, использование 24 цифр может быть логичным с точки зрения математических свойств, хотя в данном случае цифры берутся из диапазона 0–9, а не напрямую из Фибоначчи.  
Для коротких входных данных (например, 3 цифры) пользователь может расширить последовательность до 12 или 24 с помощью метода, похожего на Фибоначчи, что мы рассмотрим ниже.  
Расширение последовательности с помощью метода, похожего на Фибоначчи
Если на входе меньше 12 цифр, последовательность можно расширить, используя рекуррентный подход, аналогичный Фибоначчи: каждая новая цифра вычисляется как сумма двух предыдущих по модулю 10. Например:  
Начальная последовательность: 1, 2, 3.  
Следующая цифра: 2 + 3 = 5 (по модулю 10 — 5).  
Затем: 3 + 5 = 8, 5 + 8 = 13 → 3 (по модулю 10), и так далее, пока не достигнем нужной длины (12 или 24).
Пример расширения до 12 цифр для 1, 2, 3:  
Шаги: 1, 2, 3, 5, 8, 3, 1, 4, 5, 9, 4, 3.
Этот метод увеличивает разнообразие, как указано пользователем, и позволяет использовать последовательность для дальнейшего маппинга.
Маппинг цифр на музыкальные элементы
Для последовательности длиной 12 цифр (или расширенной до 12) предлагается следующий алгоритм:  
Выбор набора инструментов:  
Первая цифра (0–8) определяет один из 9 предопределённых наборов инструментов. Если цифра 9, можно считать её эквивалентной 0 или игнорировать, в зависимости от реализации.
Определение тональности (ключа и моды):  
Вторая цифра определяет моду: 0 — мажор, 1 — минор (для цифр 2–9 можно использовать остаток от деления на 2, например, 2 % 2 = 0 для мажора).  
Сумма цифр с 3 по 12 вычисляется, а затем берётся по модулю 12 для определения тоники (ключевой ноты). Например:  
0 соответствует C, 1 — G, 2 — D, 3 — A, 4 — E, 5 — B, 6 — F#, 7 — C#, 8 — F, 9 — Bb, 10 — Eb, 11 — Ab.
Таким образом, если сумма 45, то 45 % 12 = 9, что соответствует Bb мажор или минор, в зависимости от моды.
Выбор аккордов и дополнительных эффектов:  
Цифры с 3 по 12 используются для построения аккордовой последовательности. Каждую цифру маппим следующим образом:  
Цифры 0–5 соответствуют диатоническим аккордам в выбранном ключе и моде. Например:  
0: тоника (I или i, мажор или минор в зависимости от моды).  
1: доминанта (V или v, часто мажор в гармоническом миноре).  
2: медианта (III или iii).  
3: субмедианта (VI или vi).  
4: супертоника (II или ii).  
5: субдоминанта (IV или iv).
Цифры 6–9 могут использоваться для специальных эффектов, таких как:  
Добавление диссонансных нот (например, суспензии).  
Изменение ритма или длительности аккорда.  
Выбор дополнительного инструмента для этого аккорда.  
Добавление пауз или реверберации.
Пример маппинга для конкретной последовательности
Рассмотрим последовательность 1, 2, 3, 5, 8, 3, 1, 4, 5, 9, 4, 3:  
Набор инструментов: 1 (из 9 предопределённых).  
Мода: 2 % 2 = 0 → мажор.  
Сумма для ключа: 3+5+8+3+1+4+5+9+4+3 = 45, 45 % 12 = 9 → Bb мажор.  
Аккорды и эффекты: Цифры 3–12 (3, 5, 8, 3, 1, 4, 5, 9, 4, 3):  
3 → субмедианта (G minor в Bb мажор).  
5 → субдоминанта (Eb major).  
8 → специальный эффект (например, добавление реверберации).  
3 → G minor.  
1 → доминанта (F major).  
4 → супертоника (C minor).  
5 → Eb major.  
9 → специальный эффект (например, пауза).  
4 → C minor.  
3 → G minor.
Итоговая аккордовая последовательность: G minor, Eb major, (эффект), G minor, F major, C minor, Eb major, (эффект), C minor, G minor.
Учёт арпеджиатора и синтезатора
Пользователь упомянул использование арпеджиатора, который может проигрывать последовательность нот из выбранного аккорда (например, вверх, вниз, случайно). Это добавляет ещё один уровень выразительности: настройка арпеджиатора (например, в популярном синтезаторе Serum) может быть частью процесса, где цифры 6–9 влияют на паттерн арпеджиатора. Например, цифра 6 может выбрать восходящий паттерн, а 9 — случайный.  
Таблица маппинга аккордов для мажорной и минорной мод
Ниже приведена таблица, показывающая, как цифры 0–5 маппятся на аккорды в зависимости от моды, для примера в ключе C:  
Цифра
Мажор (C major)
Минор (C minor, natural)
0
C major (I)
C minor (i)
1
G major (V)
G minor (v)
2
E minor (iii)
Eb major (III)
3
A minor (vi)
Ab major (VI)
4
D minor (ii)
D diminished (ii°)
5
F major (IV)
F minor (iv)
Примечание: Для минорной тональности можно рассмотреть гармонический минор для мажорной доминанты (V), но для простоты здесь используется натуральный минор.  
Рекомендации по реализации
Если вы начинаете с 3 цифр, расширьте их до 12 с помощью метода, описанного выше, для удобства работы.  
Для 24 цифр можно использовать аналогичный подход, разделив последовательность на две части: первую для инструментов и тональности, вторую — для аккордов и эффектов.  
Экспериментируйте с маппингом цифр 6–9: например, добавляйте диссонансные ноты или изменяйте темп для создания уникальных текстур.  
Используйте арпеджиатор для автоматического создания мелодий на основе аккордов, что особенно эффективно с синтезаторами, такими как Serum.
Заключение
Рекомендуется начать с 12 цифр для простоты, расширяя короткие последовательности с помощью метода, похожего на Фибоначчи. Это обеспечивает достаточную вариативность для создания интересной музыки, где первая цифра выбирает инструменты, вторая — моду, а остальное определяет аккорды и эффекты. Для более сложных композиций можно использовать 24 цифры, учитывая периодичность Фибоначчи. Этот подход сочетает математическую теорию и музыкальную практику, создавая гармоничные и разнообразные музыкальные произведения.  
Ключевые источники
Serum синтезатор для электронной музыки  
Теория круга квинт в музыке
